

## 小程序

小程序是运行在平台生态内的轻量级应用 

特点：
  - 无需安装，随用随开，减少用户操作成本
  - 拥有独立的框架与组件体系
  - 依赖于特定平台

### 小程序架构

双线程模型:
- 渲染层
  - 依赖webview 负责 UI 渲染
- 逻辑层
  - 处理业务逻辑，基于 V8/JSCore 引擎
- 系统层
  - 提供平台能力， 文件系统、网络、地理位置等
  - wx API
*好处*
1. 安全 原生沙箱隔离
  - 无法跳转
  - 无法操作dom
  - 无法随意使用 window上 未知的API
2. 性能
  - 双线程并行， 初始化快
  - 不会阻塞
3. 提供原生渲染与原生API能力 


*运行机制*
  - 冷启动
  - 热启动
*更新机制*
  - 冷启动 时 发现新版本， 异步下载新版本，

### 性能优化问题

1. 频繁调用 setData()
  - 如：定时器中，监听页面滚动的钩子中调用
2. 庞大数据量调用setData
  - 数据通信机制，传输的数据需要转换为字符串形式 
3. 复杂繁多的dom结构

相关优化点:
1. 分包加载:
  - 划分主包和子包
2. 数据更新优化
  - 使用 setData 传递的数据要尽量小
  - 将页面上不需要频繁更新的数据抽离
3. 懒加载图片
4. 数据缓存